<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Homework6</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- d3 cloud -->
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/d3.layout.cloud.js"></script>
    <script type="text/javascript" src="/static/myjavascript.js"></script>
  </head>
  <body onload="loadMainPage()">
    <div class="main">
      <div class="button-class">
        <div id="button-group">
          <button class="button active" type="button" name="Google">Google News</button>
          <button class="button" type="button" name="Search">Search</button>
        </div>
      </div>
      <div class="container">
        <div id="upper">


        <div id="row">
          <div id="car">
              <div class="Slides">
                <a id="Image1" href="" target="_blank"><img class="image-slider" style="width: 100%;object-fit: cover;" src="">
                  <div class="car-overlay"><h3></h3><p class="slide-para"></p></div>
                </a>
              </div>
              <div class="Slides">
                <a id="Image1" href="" target="_blank"><img class="image-slider" style="width: 100%;object-fit: cover;" src="">
                  <div class="car-overlay"><h3></h3><p class="slide-para"></p></div>
                </a>
              </div>
              <div class="Slides">
                <a id="Image1" href="" target="_blank"><img class="image-slider" style="width: 100%;object-fit: cover;" src="">
                  <div class="car-overlay"><h3></h3><p class="slide-para"></p></div>
                </a>
              </div>
              <div class="Slides">
                <a id="Image1" href="" target="_blank"><img class="image-slider" style="width: 100%;object-fit: cover;" src="">
                  <div class="car-overlay"><h3></h3><p class="slide-para"></p></div>
                </a>
              </div>
              <div class="Slides">
                <a id="Image1" href="" target="_blank"><img class="image-slider" style="width: 100%;object-fit: cover;" src="">
                  <div class="car-overlay"><h3></h3><p class="slide-para"></p></div>
                </a>
              </div>

          </div>
          <div id="cloud">
          </div>
          </div>
          <div id="cnn">
            <div class="abcd">
              <h1 style="font-size:25px;">CNN</h1>
              <hr class="line1">
            </div>

            <div class="cnn-cards">
              <div class="card">
                <a class="anchor-link" href="">
                  <div class="card-link">
                    <img class="cnn-image"src=""  style="width:100%">
                    <div class="container-card">
                      <h4 class="cnn-header"><b></b></h4>
                      <p class="cnn-desp"></p>
                    </div>
                  </div>
                </a>
              </div>
              <div class="card">
                <a class="anchor-link" href="">
                  <div class="card-link">
                    <img class="cnn-image" src="" style="width:100%">
                    <div class="container-card">
                      <h4 class="cnn-header"><b></b></h4>
                      <p class="cnn-desp"></p>
                    </div>
                  </div>
                </a>
              </div>
              <div class="card">
                <a class="anchor-link" href="">
                  <div class="card-link">
                    <img class="cnn-image" src=""  style="width:100%">
                    <div class="container-card">
                      <h4 class="cnn-header"><b></b></h4>
                      <p class="cnn-desp"></p>
                    </div>
                  </div>
                </a>
              </div>
              <div class="card">
                <a class="anchor-link" href="">
                  <div class="card-link">
                    <img class="cnn-image" src=""  style="width:100%">
                    <div class="container-card">
                      <h4 class="cnn-header"><b></b></h4>
                      <p class="cnn-desp"></p>
                    </div>
                  </div>
                </a>
              </div>
            </div>

          </div>
          <div id="fox">
            <div class="abcd">
              <h1 style="font-size:25px;">Fox News</h1>
              <hr class="line1">
            </div>

            <div class="cnn-cards">
              <div class="card">
                <a class="anchor-link" href="">
                  <div class="card-link">
                    <img class="cnn-image"src=""  style="width:100%">
                    <div class="container-card">
                      <h4 class="cnn-header"><b></b></h4>
                      <p class="cnn-desp"></p>
                    </div>
                  </div>
                </a>
              </div>
              <div class="card">
                <a class="anchor-link" href="">
                  <div class="card-link">
                    <img class="cnn-image" src=""  style="width:100%">
                    <div class="container-card">
                      <h4 class="cnn-header"><b></b></h4>
                      <p class="cnn-desp"></p>
                    </div>
                  </div>
                </a>
              </div>
              <div class="card">
                <a class="anchor-link" href="">
                  <div class="card-link">
                    <img class="cnn-image" src=""  style="width:100%">
                    <div class="container-card">
                      <h4 class="cnn-header"><b></b></h4>
                      <p class="cnn-desp"></p>
                    </div>
                  </div>
                </a>
              </div>
              <div class="card">
                <a class="anchor-link" href="">
                  <div class="card-link">
                    <img class="cnn-image" src="" style="width:100%">
                    <div class="container-card">
                      <h4 class="cnn-header"><b></b></h4>
                      <p class="cnn-desp"></p>
                    </div>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
        <div id="lower">
          <div id="form-div" >
            <form class="" action="#" method="post" onsubmit="return false;" onreset="return false;" onload="getAllSources()">
              Keyword<span class="required">*</span><input id="keyword" type="text" name="Keyword" value="" autofocus required style="text-align:left;">
              From<span class="required">*</span><input id="from-date" type="date" name="From" value="" required style="font-size:12px">
              To <span class="required">*</span><input id="to-date" type="date" name="To" value="" required style="font-size:12px">
              <br>
              Catergory
              <select id="category" onchange="getSources()">
                <option value="all">all</option>
                <option value="business">business</option>
                <option value="entertainment">entertainment</option>
                <option value="general">general</option>
                <option value="health">health</option>
                <option value="science">science</option>
                <option value="sports">sports</option>
                <option value="technology">technology</option>
              </select>
              &nbsp;&nbsp; &nbsp;
              Source
              <select id="source">
                <option value="all">all</option>
              </select>
              <br>
              <input type="submit" class="form-buttons search" name="button" value="Search" style="height:25px;font-family:times;" onclick="viewSearchResults(this.form)"></button>
              &nbsp;
              <input type="reset" class="form-buttons clear " name="button" value="Clear" style="height:25px; font-family:times;" onclick="clearResults()"></button>
            </form>
          </div>
          <div id="results">
          </div>
        </div>





      </div>

    </div>
    <script>
      var header = document.getElementById("button-group");
      var btns = header.getElementsByClassName("button");
      for (var i = 0; i < btns.length; i++) {

        var btn = btns[i].name;
        btns[i].addEventListener("click", function() {
        var current = document.getElementsByClassName("active");
        current[0].className = current[0].className.replace(" active", "");
        this.className += " active";
        if(this.name.localeCompare("Google") == 0){
          console.log("gn");
          document.getElementById("lower").style.display = "none";
          document.getElementById("upper").style.display = "block";
        }
        else if(this.name.localeCompare("Search") == 0){
          console.log("search");
          document.getElementById("lower").style.display = "block";
          document.getElementById("upper").style.display = "none";
        }
        });
      }
</script>
<script>
    var myIndex = 0;
    carousel();

    function carousel() {
      var i;
      var x = document.getElementsByClassName("Slides");
      for (i = 0; i < x.length; i++) {
        x[i].style.display = "none";
      }
      myIndex++;
      if (myIndex > x.length) {myIndex = 1}
      x[myIndex-1].style.display = "block";
      setTimeout(carousel, 3000); // Change image every 2 seconds
    }
</script>
<script type="text/javascript">
var xhhtp4 = new XMLHttpRequest();
xhhtp4.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      jsonObj4= JSON.parse(this.responseText);
      console.log(jsonObj4);

      // var myWords = [{word: "Running", size: "10"}, {word: "Surfing", size: "20"}, {word: "Climbing", size: "50"}, {word: "Kiting", size: "30"}, {word: "Sailing", size: "20"}, {word: "Snowboarding", size: "20"} ]

      myWords = [];
      for(var i = 0; i < jsonObj4.length; i++){
        myWords.push({word:jsonObj4[i][0].toString(), size:jsonObj4[i][1].toString()});
      }
      console.log(myWords);

      parent_height = document.getElementById("cloud").clientHeight;
      parent_width = document.getElementById("cloud").clientWidth;

      var margin = {top: 0, right: 0, bottom: 0, left: 0},
          width = parent_width,
          height = parent_height;

      var svg = d3.select("#cloud").append("svg")
          .attr("width", width)
          .attr("height", height )
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

      word_list = myWords.map(function(d) {return {text: d.word, size:d.size}; })
      console.log(word_list);
      var layout = d3.layout.cloud()
        .size([width, height])
        .words(word_list)
        .padding(5)        //space between words
        .rotate(function() { return ~~(Math.random() * 2) * 90; })
        .fontSize(function(d) { return Math.max(7*(d.size),12); })      // font size of words
        .on("end", draw);
      layout.start();


      function draw(words) {
        svg
          .append("g")
            .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
            .selectAll("text")
              .data(words)
            .enter().append("text")
              .style("font-size", function(d) { return d.size +"px"; })
              .style("fill", "#000000")
              .attr("text-anchor", "middle")
              .style("font-family", "Impact")
              .attr("transform", function(d) {
                return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
              })
              .text(function(d) { return d.text; });
      }
    }
  };
  xhhtp4.open("GET", "/wordcloud_words", true);
  xhhtp4.send();

</script>
  </body>

</html>
